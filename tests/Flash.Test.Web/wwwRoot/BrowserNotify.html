<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>

<body>
    请输入浏览器通知内容：<input type="textarea" id="base64Str" value="你有一张新的加急订单，请及时处理！">
    <button onclick="onOk()">确定</button><br />
    <script>
        function onOk() {
            var options = {
                dir: "rtl", //auto自动;ltr 从左到右;rtl 从右到左;
                lang: "zh-CN",//指定通知使用的语言
                body: "请求电话通话",//通知中额外显示的字符串
                icon: "http://icvip-temp.oss-cn-shenzhen.aliyuncs.com/cdn/202211/xwnnbykn_favicon.ico", //图片的URL，用于通知的图标;
                data: { //​任意类型和通知相关联的数据
                    url: "https://www.baidu.com"
                },
                sound: "", //声音提醒地址
                renotify: true, //通知是否使用叠加效果，默认true，fasle则为替换
                vibrate: [300,100,300]
            };
            showNotification("您有新的来电，请及时接听", options)
        }

        function showNotification(title, options) {
            var Notification = window.Notification || window.mozNotification || window.webkitNotification;
            if (Notification) {
                Notification.requestPermission(function (status) {
                    // status默认值
                    // 'default' 表示拒绝， 
                    // 'denied' 表示用户不想要通知，
                    // 'granted' 表示用户同意启用通知
                    if (status != "granted") return;
                    var tag = "sds" + Math.random();
                    var notify = new Notification(title, {
                        dir: 'auto',
                        lang: 'zh-CN',
                        requireInteraction: true,
                        data: options.data,
                        tag: tag,//实例化的notification的id
                        icon: options.icon,//通知的缩略图,//icon 支持ico、png、jpg、jpeg格式
                        body: options.body, //通知的具体内容
                        sound: options.sound,
                        renotify: options.renotify,
                        vibrate: options.vibrate
                    });
                    notify.onclick = function () {
                        console.log("消息被点击！！！");
                        //如果通知消息被点击,通知窗口将被激活
                        window.focus();
                        notify.close();
                        //打开对应的界面
                        window.open(notify.data.url, '_blank');
                    };
                    notify.onerror = function () {
                        console.log("消息出错！！！");
                    };
                    notify.onclose = function () {
                        console.log("消息关闭！！！");
                    };
                });
            } else {
                console.log("您的浏览器不支持桌面消息");
            }
        };
    </script>
</body>
</html>